import { useRef } from 'react';
import animations from './icon.animations';
import { StyledSvg } from './icon.styles';

interface IconProps {
  /**
   * Type of icon
   */
  type: 'Pencil' | 'Eye' | 'Text' | 'Bin' | 'Plus';
  /**
   * Background color of icon.
   */
  backgroundColor?: string;
  /**
   * How large should the icon be?
   */
  size?: 'small' | 'medium' | 'large';
  /**
   * What icon should do after hover?
   */
  hoverAnimation?: 'none' | 'shake' | 'spin' | 'scale';
  /**
   * What icon should do after user click?
   */
  clickAnimation?: 'none' | 'shake' | 'spin' | 'scale';
  /**
   * Optional click handler
   */
  onClick?: (type: 'Pencil' | 'Eye' | 'Text' | 'Bin' | 'Plus') => void;
}

export const Icon = ({
  type,
  backgroundColor = 'black',
  size = 'small',
  hoverAnimation = 'none',
  clickAnimation = 'none',
  onClick,
}: IconProps) => {
  const ref = useRef<SVGSVGElement>(null);

  const sizeToNumber = () => {
    switch (size) {
      case 'large':
        return '256';
      case 'medium':
        return '35';
      case 'small':
        return '25';
      default:
        throw Error('The size parameter is setted to unsupported value');
    }
  };

  const handleClick = () => {
    if (onClick) {
      onClick(type);
    }

    if (clickAnimation !== 'none') {
      animations(clickAnimation, ref, 0.5);
    }
  };

  const handleMouseEnter = () => {
    if (hoverAnimation !== 'none') {
      animations(hoverAnimation, ref, 1);
    }
  };

  const renderType = () => {
    switch (type) {
      case 'Bin':
        return (
          <g>
            <path
              d="M436,60h-75V45c0-24.813-20.187-45-45-45H196c-24.813,0-45,20.187-45,45v15H76c-24.813,0-45,20.187-45,45    c0,19.928,13.025,36.861,31.005,42.761L88.76,470.736C90.687,493.875,110.385,512,133.604,512h244.792    c23.22,0,42.918-18.125,44.846-41.271l26.753-322.969C467.975,141.861,481,124.928,481,105C481,80.187,460.813,60,436,60z M181,45    c0-8.271,6.729-15,15-15h120c8.271,0,15,6.729,15,15v15H181V45z M393.344,468.246c-0.643,7.712-7.208,13.754-14.948,13.754    H133.604c-7.739,0-14.305-6.042-14.946-13.747L92.294,150h327.412L393.344,468.246z M436,120H76c-8.271,0-15-6.729-15-15    s6.729-15,15-15h360c8.271,0,15,6.729,15,15S444.271,120,436,120z"
              fill={backgroundColor}
            />
            <path
              d="M195.971,436.071l-15-242c-0.513-8.269-7.67-14.558-15.899-14.043c-8.269,0.513-14.556,7.631-14.044,15.899l15,242.001    c0.493,7.953,7.097,14.072,14.957,14.072C189.672,452,196.504,444.684,195.971,436.071z"
              fill={backgroundColor}
            />
            <path
              d="M256,180c-8.284,0-15,6.716-15,15v242c0,8.284,6.716,15,15,15s15-6.716,15-15V195C271,186.716,264.284,180,256,180z"
              fill={backgroundColor}
            />
            <path
              d="M346.927,180.029c-8.25-0.513-15.387,5.774-15.899,14.043l-15,242c-0.511,8.268,5.776,15.386,14.044,15.899    c8.273,0.512,15.387-5.778,15.899-14.043l15-242C361.483,187.659,355.196,180.541,346.927,180.029z"
              fill={backgroundColor}
            />
          </g>
        );

      case 'Eye':
        return (
          <g>
            <path
              d="M508.745,246.041c-4.574-6.257-113.557-153.206-252.748-153.206S7.818,239.784,3.249,246.035    c-4.332,5.936-4.332,13.987,0,19.923c4.569,6.257,113.557,153.206,252.748,153.206s248.174-146.95,252.748-153.201    C513.083,260.028,513.083,251.971,508.745,246.041z M255.997,385.406c-102.529,0-191.33-97.533-217.617-129.418    c26.253-31.913,114.868-129.395,217.617-129.395c102.524,0,191.319,97.516,217.617,129.418    C447.361,287.923,358.746,385.406,255.997,385.406z"
              fill={backgroundColor}
            />
            <path
              d="M255.997,154.725c-55.842,0-101.275,45.433-101.275,101.275s45.433,101.275,101.275,101.275    s101.275-45.433,101.275-101.275S311.839,154.725,255.997,154.725z M255.997,323.516c-37.23,0-67.516-30.287-67.516-67.516    s30.287-67.516,67.516-67.516s67.516,30.287,67.516,67.516S293.227,323.516,255.997,323.516z"
              fill={backgroundColor}
            />
          </g>
        );

      case 'Pencil':
        return (
          <g>
            <path
              d="M88.84 348.776c-4.096 0-8.184-1.56-11.312-4.688-6.248-6.248-6.248-16.376 0-22.624L327.56 71.432c6.24-6.248 16.376-6.248 22.624 0 6.248 6.248 6.248 16.376 0 22.624L100.152 344.088a15.956 15.956 0 01-11.312 4.688z"
              fill={backgroundColor}
            />
            <path
              d="M64.136 464c-1.112 0-2.24-.12-3.368-.36-8.64-1.856-14.144-10.36-12.288-19L73.2 329.416c1.856-8.64 10.4-14.128 19-12.288 8.64 1.856 14.144 10.36 12.288 19l-24.72 115.224C78.16 458.864 71.52 464 64.136 464zM179.344 439.28c-4.096 0-8.184-1.56-11.312-4.688-6.248-6.248-6.248-16.376 0-22.624l250.032-250.024c6.24-6.248 16.376-6.248 22.624 0 6.248 6.248 6.248 16.376 0 22.624L190.664 434.592a15.954 15.954 0 01-11.32 4.688z"
              fill={backgroundColor}
            />
            <path
              d="M64.104 464c-7.384 0-14.016-5.136-15.632-12.648-1.848-8.64 3.648-17.144 12.288-19l115.224-24.72c8.648-1.832 17.152 3.656 19 12.288 1.848 8.64-3.648 17.144-12.288 19L67.472 463.64a15.66 15.66 0 01-3.368.36zM384.12 234.504c-4.096 0-8.192-1.56-11.312-4.688l-90.504-90.504c-6.248-6.248-6.248-16.376 0-22.624 6.24-6.248 16.384-6.248 22.624 0l90.504 90.504c6.248 6.248 6.248 16.376 0 22.624a15.923 15.923 0 01-11.312 4.688zM429.376 189.256c-4.096 0-8.192-1.56-11.32-4.688-6.248-6.248-6.248-16.376 0-22.632 8.904-8.904 13.808-20.96 13.808-33.936 0-12.976-4.904-25.032-13.808-33.936-8.912-8.912-20.968-13.816-33.944-13.816-12.976 0-25.032 4.904-33.936 13.816-6.24 6.248-16.368 6.256-22.632 0-6.248-6.248-6.248-16.376 0-22.632 14.944-14.952 35.032-23.184 56.568-23.184 21.528 0 41.624 8.232 56.568 23.184 14.952 14.944 23.184 35.032 23.184 56.568s-8.232 41.624-23.184 56.568a15.924 15.924 0 01-11.304 4.688z"
              fill={backgroundColor}
            />
          </g>
        );

      case 'Text':
        return (
          <path
            d="m276 374c0 11.046-8.954 20-20 20h-118c-11.046 0-20-8.954-20-20s8.954-20 20-20h118c11.046 0 20 8.954 20 20zm236-253.85v234.183c0 30.708-11.958 59.576-33.672 81.289l-42.706 42.707c-21.713 21.713-50.581 33.671-81.289 33.671h-234.183c-66.411 0-120.15-53.745-120.15-120.15v-271.7c0-66.411 53.745-120.15 120.15-120.15h271.7c66.411 0 120.15 53.745 120.15 120.15zm-42.683 254.183h-54.984c-22.056 0-40 17.944-40 40v54.984c12.362-3.4 23.692-9.961 33.004-19.272l42.707-42.708c9.312-9.312 15.873-20.642 19.273-33.004zm2.683-254.183c0-44.301-35.851-80.15-80.15-80.15h-271.7c-44.301 0-80.15 35.851-80.15 80.15v271.7c0 44.301 35.851 80.15 80.15 80.15h214.183v-57.667c0-44.112 35.888-80 80-80h57.667zm-98 115.85h-236c-11.046 0-20 8.954-20 20s8.954 20 20 20h236c11.046 0 20-8.954 20-20s-8.954-20-20-20zm0-118h-236c-11.046 0-20 8.954-20 20s8.954 20 20 20h236c11.046 0 20-8.954 20-20s-8.954-20-20-20z"
            fill={backgroundColor}
          />
        );

      case 'Plus':
        return (
          <path
            d="m467 211h-166v-166c0-24.853-20.147-45-45-45s-45 20.147-45 45v166h-166c-24.853 0-45 20.147-45 45s20.147 45 45 45h166v166c0 24.853 20.147 45 45 45s45-20.147 45-45v-166h166c24.853 0 45-20.147 45-45s-20.147-45-45-45z"
            fill={backgroundColor}
          />
        );

      default:
        throw new Error('The type parameter is setted to unsupported value');
    }
  };

  return (
    <StyledSvg
      ref={ref}
      xmlns="http://www.w3.org/2000/svg"
      version="1.1"
      width={sizeToNumber()}
      height={sizeToNumber()}
      x="0"
      y="0"
      viewBox="0 0 512 512"
      onClick={handleClick}
      onMouseEnter={handleMouseEnter}
      role="button"
    >
      {renderType()}
    </StyledSvg>
  );
};
